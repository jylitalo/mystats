{{ block "top-tab" . }}
{{ template "top-form" .Form }}
<hr />
{{ template "top-data" .Data }}
{{ end }}

{{ block "top-data" . }}
<div id="top-data">
    <table>
        <thead>
            <tr>
            {{ range $s := .Headers }}
            <th>{{ $s }}</th>
            {{ end }}
        </tr>
        </thead>
        <tbody>
            {{ range $row := .Rows }}
                {{ $trimmed := joined $row }}
                {{ if ne $trimmed "" }}
                <tr>
                    {{ range $col := $row }}
                        <td>{{ $col }}</td>
                    {{ end }}
                </tr>
                {{ end }}
            {{ end }}
        </tbody>
    </table>
</div>
{{ end }}

{{ block "top-form" . }}
<form hx-swap="outerHTML" hx-target="#top-data" hx-post="/top">
    <div id="years">
        Years:
        {{ range $y, $v := .Years }}
            <input type="checkbox" name="year_{{ $y }}"{{ if $v }} checked{{ end }} hx-swap="outerHTML" hx-target="#top-data" hx-post="/top"><label>{{ $y }}</label>
        {{ end }}
    </div>
</form>
{{ end }}
